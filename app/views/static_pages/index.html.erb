<div class="container">
  <h1><%= t "header.logo" %></h1>
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#exam">
      <%= t "exam.content" %></a></li>
    <li><a data-toggle="tab" href="#suggest_question">
      <%= t "suggest_question.title" %></a></li>
  </ul>

  <div class="tab-content">
    <div id="exam" class="tab-pane fade in active mygrid-wrapper-div">
      <table class="table sortable">
        <thead>
          <tr>
            <th><%= t "exam.subject" %></th>
            <th><%= t "exam.status" %></th>
            <th><%= t "exam.duration" %></th>
            <th><%= t "exam.spent_time" %></th>
            <th><%= t "exam.score" %></th>
            <th><%= t "exam.date" %></th>
          </tr>
        </thead>
        <tbody>
          <% @exams.each do |exam| %>
            <tr>
              <td><%= link_to exam.subject.name, exam %></td>
              <td><%= exam.status %></td>
              <td><%= Settings.duration %></td>
              <td><%= exam.spent_time %></td>
              <td><%= exam.score %></td>
              <td><%= exam.created_at %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <button type="button" class="btn btn-info btn-lg" data-toggle="modal"
        data-target="#myModal">
        <%= t "exam.create" %>
      </button>
      <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <h4 class="modal-title"><%= t "exam.create" %></h4>
            </div>
            <div class="modal-body">
              <%= form_for @exam do |f| %>
                <%= f.label :subject %>
                <%= f.select :subject_id, @subjects_select %>
                <%= f.submit %>
              <% end %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default"
                data-dismiss="modal">
                <%= t :close %>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="suggest_question" class="tab-pane fade mygrid-wrapper-div">
      <table class="table sortable">
        <thead>
          <tr>
            <th><%= t "suggest_question.subject" %></th>
            <th><%= t "suggest_question.content" %></th>
            <th><%= t "suggest_question.status" %></th>
            <th><%= t "suggest_question.date" %></th>
          </tr>
        </thead>
        <tbody>
          <% @suggest_questions.each do |suggest_question| %>
            <tr>
              <td><%= suggest_question.subject.name %></td>
              <td><%= link_to truncate(suggest_question.content,
                length: Settings.length),
                suggest_question_path(suggest_question) %>
              </td>
              <td><%= suggest_question.status %></td>
              <td><%= suggest_question.created_at %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <button type="button" class="btn btn-primary" data-amount="30"
        data-toggle="modal" data-target="#question_popup">
        <%= t "suggest_question.submit" %>
      </button>
      <div id="question_popup" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <h4 class="modal-title"><%= t "suggest_question.submit" %></h4>
            </div>
            <div class="modal-body">
              <%= form_for @suggest_question do |f| %>
                <%= render "shared/error_messages",
                  object: @suggest_question %>

                <%= render "suggest_questions/suggest_question_fields",
                  f: f %>

                <%= f.submit t("suggest_question.submit"),
                  class: "btn btn-primary" %>
              <% end %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default"
                data-dismiss="modal">
                <%= t :close %>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
